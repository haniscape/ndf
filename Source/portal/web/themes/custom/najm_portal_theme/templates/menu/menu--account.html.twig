{#
/**
* @file
* Bootstrap Barrio's override to display Menu Account.
*
* Available variables:
* - menu_name: The machine name of the menu.
* - items: A nested list of menu items. Each menu item contains:
* - attributes: HTML attributes for the menu item.
* - below: The menu item child items.
* - title: The menu link title.
* - url: The menu link url, instance of \Drupal\Core\Url
* - localized_options: Menu link localized options.
* - is_expanded: TRUE if the link has visible children within the current
* menu tree.
* - is_collapsed: TRUE if the link has children within the current menu tree
* that are not currently visible.
* - in_active_trail: TRUE if the link is in the active trail.
*/
#}
{% import _self as menus %}

{#
We call a macro which calls itself to render the full tree.
@see http://twig.sensiolabs.org/doc/tags/macro.html
#}

{% if logged_in %}
	<div class="dropdown">
		<a href="#" class="dropdown-toggle no-caret" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			<img src="{{ user_picture }}" width="30" height="30" alt="user picture" srcset=""/>
		</a>
		<div class="dropdown-menu dropdown-menu-right mt-4">
			<a href="/user">
				<button class="dropdown-item py-3" type="button">
					<img src="{{ user_picture }}" width="22" height="22" alt="" srcset="">
					{{"My Profile"|t }}
				</button>
			</a>
			<a href="/user/apps">
				<button class="dropdown-item py-3" type="button">
					<img src="{{'/' ~ directory ~ '/images/svg/icons/apps.svg'}}" width="22" height="22" alt="" srcset="">
					{{"apps"|t }}
				</button>
			</a>
			<button class="dropdown-item py-3" type="button" data-toggle="modal" data-target="#changeEmailModal">
				<img src="{{'/' ~ directory ~ '/images/svg/icons/Email.svg'}}" width="22" height="22" alt="" srcset="">
				{{"Change Email"|t }}
			</button>
			<button class="dropdown-item py-3" type="button" data-toggle="modal" data-target="#changePassModal">
				<img src="{{'/' ~ directory ~ '/images/svg/icons/Password.svg'}}" width="22" height="22" alt="" srcset="">
				{{"Change Password"|t }}
			</button>
			<div class="text-center my-3">
				<a class="btn btn-danger w-75" href="{{ url('user.logout') }}">{{"Logout"|t }}</a>
			</div>
		</div>
	</div>
{% else %}
	{{ menus.menu_links(items, attributes, 0) }}
	{% macro menu_links(items, attributes, menu_level) %}
		{% import _self as menus %}
		{% if items %}
			{% if menu_level == 0 %}
				<div{{attributes.addClass('nav')|without('id')}}>
					{% for route, item in items %}
						{%
	set classes = [
	item.url.toString() == '/user/login' ?'btn btn-primary' : 'nav-link' ,
	item.in_active_trail ? 'active',
	item.url.getOption('attributes').class ? item.url.getOption('attributes').class | join(' '),
	'nav-link-' ~ item.url.toString() | clean_class,
	]
	%}
						{{ link(item.title, item.url, {'class': classes} ) }}
					{% endfor %}
				</div>
			{% endif %}
		{% endif %}
	{% endmacro %}
{% endif %}
